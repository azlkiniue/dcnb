## Purpose
- Go utility to delete Docker containers with autogenerated moby-style names (e.g., `inspiring_franklin`).
- Uses the official Docker Go SDK and the moby names list for determining which containers are autogenerated.

## Architecture overview
The codebase follows a simple structure at the root:
- [main.go](../main.go): entry point that wires the Docker client + auto-name discovery into a Bubble Tea TUI
- [tui.go](../tui.go): Bubble Tea model handling confirmation, deletion command, and status display
- [docker_client.go](../docker_client.go): Docker SDK wrapper with `DockerClient` interface for testability
- [names.go](../names.go): Name detection logic using `go:linkname` to access Docker's internal adjective/surname lists

**Critical implementation detail**: [names.go](../names.go) uses `unsafe` + `go:linkname` to directly access `github.com/docker/docker/pkg/namesgenerator.left` and `right` arrays rather than vendoring or hardcoding the lists. This keeps the implementation in sync with Docker's name generator.

## Key patterns and conventions

### Interface-based mocking
All Docker operations go through the `DockerClient` interface defined in [docker_client.go](../docker_client.go#L13-L17):
```go
type DockerClient interface {
    ContainerList(ctx context.Context, options container.ListOptions) ([]container.Summary, error)
    ContainerRemove(ctx context.Context, containerID string, options container.RemoveOptions) error
    Close() error
}
```
Tests use `mockDockerClient` (see [docker_client_test.go](../docker_client_test.go#L12-L37)) to avoid real Docker calls.

### TUI styling with lipgloss
[tui.go](../tui.go) uses `lipgloss.NewStyle()` to format the container table and status messages:
- Header row: bold white text on blue background
- Row content: simple padding for alignment
- Help text: dark gray for subtle hints
- Status messages: color-coded (green for success, red for errors, yellow for loading)
- Image names truncated to 40 chars with `...` suffix to prevent overflow

### Error handling approach
- Container removal is **idempotent**: `errdefs.IsNotFound()` errors are silently ignored ([docker_client.go](../docker_client.go#L88-L91))
- Multiple removal errors are aggregated using `errors.Join()` ([docker_client.go](../docker_client.go#L99))
- Partial successes return both removed container list AND aggregated errors

### Name detection logic
`IsAutoGeneratedName()` in [names.go](../names.go#L45) uses:
1. Regex pattern: `^([a-z]+)_([a-z]+)(\d+)?$` (adjective_surname with optional numeric suffix)
2. Dual set lookup to verify both parts exist in Docker's official lists
3. Case-insensitive matching (`strings.ToLower`)

## Development workflow
- **Build**: `go build ./...` (requires Go 1.25.0 per [go.mod](../go.mod))
- **Test**: `go test ./...` — uses table-driven tests ([names_test.go](../names_test.go#L5-L20))
- **Cross-compile**: `GOOS=linux GOARCH=arm64 go build ./...` (multi-arch support per README)
- **Dependencies**: `go mod tidy` to sync after adding imports

## Testing conventions
- Use table-driven test style with `struct { name string; expected bool }` pattern ([names_test.go](../names_test.go#L5-L17))
- Mock Docker client returns pre-configured container lists and removal errors ([docker_client_test.go](../docker_client_test.go#L12))
- Test both success cases AND partial failure scenarios (e.g., some containers fail to remove)
- Helper functions like `containsID()` for assertion clarity ([docker_client_test.go](../docker_client_test.go#L96-L103))

## Key files reference
- [main.go](../main.go): Program wiring (find candidates → TUI)
- [tui.go](../tui.go): TUI model, key bindings, and cleanup command dispatch
- [docker_client.go](../docker_client.go): Core removal logic in `CleanAutoNamedContainers()`
- [names.go](../names.go): `go:linkname` hack to access Docker's internal name lists